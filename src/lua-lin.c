#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
void execute_lua_code(const char *lua_code) {  char temp_dir[] = "/tmp/lua-lin-XXXXXX"; char *temp_dir_path = mkdtemp(temp_dir); if (temp_dir_path == NULL) { perror("Failed to create temporary directory"); return; }  char lua_file_path[256]; snprintf(lua_file_path, sizeof(lua_file_path), "%s/lua_script.lua", temp_dir_path); FILE *lua_file = fopen(lua_file_path, "w"); if (lua_file == NULL) { perror("Failed to open Lua file"); return; }  fprintf(lua_file, "%s", lua_code); fclose(lua_file);  char command[512]; snprintf(command, sizeof(command), "lua -lin \"%s\"", lua_file_path); system(command);  remove(lua_file_path); rmdir(temp_dir_path);}void parse_arguments(int argc, char *argv[]) { if (argc != 2) { fprintf(stderr, "Usage: lua-lin \"<lua_code>\"\n"); return; }  char lua_code[1024]; int i = 0; int in_quotes = 0;  for (int j = 1; j < argc; j++) { char *arg = argv[j]; for (int k = 0; arg[k] != '\0'; k++) { if (arg[k] == '"') { in_quotes = !in_quotes;  continue;  }  if (in_quotes) { lua_code[i++] = arg[k]; } } } lua_code[i] = '\0';  execute_lua_code(lua_code);}int main(int argc, char *argv[]) { parse_arguments(argc, argv); return 0;}
